<!--
  Vehicle Details Page - Vehicle Analyzer
  Shows details, stats, and data for a single vehicle.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vehicle Details - Vehicle Analyzer</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-brand">
            <i class="fas fa-car"></i>
            <span>Vehicle Analyzer</span>
        </div>
        <ul class="nav-links">
            <li><a href="index.html">Dashboard</a></li>
            <li><a href="vehicles.html">Vehicles</a></li>
        </ul>
    </nav>

    <main class="container">
        <div class="header-actions">
            <h1 id="vehicleTitle">Vehicle Details</h1>
            <button class="btn-primary" onclick="location.href='vehicles.html'">
                <i class="fas fa-arrow-left"></i> Back to Vehicles
            </button>
        </div>

        <!-- Engine and Fuel Averages -->
        <div class="engine-averages" style="margin-bottom: 1.5rem;">
            <span><strong>Average RPM:</strong> <span id="avgRpm">Loading...</span></span>
            <span style="margin-left:2rem;"><strong>Average Temp:</strong> <span id="avgTemp">Loading...</span></span>
        </div>

        <div class="fuel-averages" style="margin-bottom: 1.5rem;">
            <span><strong>Total Distance:</strong> <span id="totalDistance">Loading...</span> km</span>
            <span style="margin-left:2rem;"><strong>Total Fuel Used:</strong> <span id="totalFuel">Loading...</span> L</span>
            <span style="margin-left:2rem;"><strong>Fuel Efficiency:</strong> <span id="fuelEfficiency">Loading...</span> km/L</span>
        </div>

        <!-- Basic Vehicle Info -->
        <div class="vehicle-info-card">
            <div id="basicInfo"></div>
        </div>

        <!-- Tabs for Engine and Fuel Data -->
        <div class="tabs">
            <button class="tab-btn active" onclick="openTab('engine')">Engine Data</button>
            <button class="tab-btn" onclick="openTab('fuel')">Fuel Data</button>
        </div>

        <!-- Engine Data Tab -->
        <div id="engine-tab" class="tab-content active-tab">
            <div class="chart-container">
                <canvas id="engineChart"></canvas>
            </div>
            <button class="btn-primary" onclick="showAddEngineDataForm()">
                <i class="fas fa-plus"></i> Add Engine Data
            </button>
            <div class="table-container">
                <table id="engineDataTable">
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>RPM</th>
                            <th>Temperature</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="engineDataBody"></tbody>
                </table>
            </div>
        </div>

        <!-- Fuel Data Tab -->
        <div id="fuel-tab" class="tab-content">
            <div class="chart-container">
                <canvas id="fuelChart"></canvas>
            </div>
            <button class="btn-primary" onclick="showAddFuelDataForm()">
                <i class="fas fa-plus"></i> Add Fuel Data
            </button>
            <div class="table-container">
                <table id="fuelDataTable">
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>Liters Used</th>
                            <th>Distance (km)</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="fuelDataBody"></tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- Add/Edit Engine Data Modal -->
    <div id="engineDataModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEngineModal()">&times;</span>
            <h2 id="engineModalTitle">Add Engine Data</h2>
            <form id="engineDataForm" onsubmit="handleEngineDataSubmit(event)">
                <input type="hidden" id="engineDataId">
                <div class="form-group">
                    <label for="engineTimestamp">Timestamp:</label>
                    <input type="datetime-local" id="engineTimestamp" required>
                </div>
                <div class="form-group">
                    <label for="engineRpm">RPM:</label>
                    <input type="number" id="engineRpm" required min="0" max="10000">
                </div>
                <div class="form-group">
                    <label for="engineTemp">Temperature (Â°C):</label>
                    <input type="number" id="engineTemp" required min="0" max="200">
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Save</button>
                    <button type="button" class="btn-secondary" onclick="closeEngineModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Fuel Data Modal -->
    <div id="fuelDataModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeFuelModal()">&times;</span>
            <h2 id="fuelModalTitle">Add Fuel Data</h2>
            <form id="fuelDataForm" onsubmit="handleFuelDataSubmit(event)">
                <input type="hidden" id="fuelDataId">
                <div class="form-group">
                    <label for="fuelTimestamp">Timestamp:</label>
                    <input type="datetime-local" id="fuelTimestamp" required>
                </div>
                <div class="form-group">
                    <label for="fuelLiters">Liters Used:</label>
                    <input type="number" id="fuelLiters" required min="0" step="0.01">
                </div>
                <div class="form-group">
                    <label for="fuelDistance">Distance (km):</label>
                    <input type="number" id="fuelDistance" required min="0" step="0.1">
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Save</button>
                    <button type="button" class="btn-secondary" onclick="closeFuelModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Chart.js and Vehicle Details Script -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/vehicle-details.js"></script>
</body>
</html>